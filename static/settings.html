<!-- ... [Header and opening HTML unchanged] ... -->

<!-- Sounds -->
<div class="flex items-center space-x-3">
  <div class="w-full">
    <label class="block font-semibold mb-1">Followed Boat Activity</label>
    <select v-model="settings.hooked_sound" class="w-full p-2 rounded border border-gray-400 bg-white">
      <option disabled value="">-- Select Sound --</option>
      <option v-for="sound in soundLibrary" :key="sound" :value="sound">{{ sound }}</option>
    </select>
  </div>
  <button @click="playSound(settings.hooked_sound)" class="bg-gray-200 px-3 py-2 rounded hover:bg-gray-300">▶</button>
</div>

<div class="flex items-center space-x-3">
  <div class="w-full">
    <label class="block font-semibold mb-1">Hooked Up (Any Boat)</label>
    <select v-model="settings.boated_sound" class="w-full p-2 rounded border border-gray-400 bg-white">
      <option disabled value="">-- Select Sound --</option>
      <option v-for="sound in soundLibrary" :key="sound" :value="sound">{{ sound }}</option>
    </select>
  </div>
  <button @click="playSound(settings.boated_sound)" class="bg-gray-200 px-3 py-2 rounded hover:bg-gray-300">▶</button>
</div>

<div class="flex items-center space-x-2">
  <input type="checkbox" id="sounds" v-model="settings.sounds_enabled" />
  <label for="sounds" class="font-semibold">Play Event Sounds</label>
</div>

<!-- ... [Wi-Fi, Bluetooth, and Modals unchanged] ... -->

<!-- Vue App -->
<script>
  const { createApp } = Vue;
  createApp({
    data() {
      return {
        settings: {
          tournament: '',
          data_source: 'live',
          refresh_interval: 30,
          event_volume: 80,
          vhf_volume: 70,
          sounds_enabled: true,
          hooked_sound: '',
          boated_sound: ''
        },
        tournaments: {},
        tournamentLogo: '',
        wifiNetworks: [],
        modalSSID: '',
        password: '',
        showPassword: false,
        showModal: false,
        wifiPopup: false,
        bluetoothDevices: [],
        soundLibrary: ['default.mp3', 'alert.mp3', 'marlin.mp3', 'airhorn.mp3']
      };
    },
    computed: {
      validTournaments() {
        return Object.fromEntries(Object.entries(this.tournaments).filter(([_, val]) => val));
      },
      connectedSSID() {
        const net = this.wifiNetworks.find(n => n.connected);
        return net ? net.ssid : 'Not connected';
      }
    },
    methods: {
      playSound(file) {
        if (!file) return;
        const audio = new Audio(`/static/sounds/${file}`);
        audio.volume = this.settings.event_volume / 100;
        audio.play();
      },
      // ... [Other methods unchanged: scanWifi, connectWifi, etc.] ...
      updateLogo() {
        const t = this.settings.tournament;
        if (this.tournaments[t]) {
          this.tournamentLogo = this.tournaments[t].logo;
        }
      },
      scanBluetooth() {
        axios.get('/bluetooth/scan').then(res => {
          this.bluetoothDevices = res.data.devices;
        });
      },
      connectBluetooth(mac) {
        axios.post('/bluetooth/connect', { mac }).then(() => this.scanBluetooth());
      },
      disconnectBluetooth(mac) {
        axios.post('/bluetooth/disconnect', { mac }).then(() => this.scanBluetooth());
      }
    },
    mounted() {
      axios.get('/api/settings').then(res => {
        this.settings = { ...this.settings, ...res.data };
        this.updateLogo();
      });

      axios.get('https://js9467.github.io/Brtourney/settings.json').then(res => {
        this.tournaments = res.data;
        this.updateLogo();
      });

      this.scanWifi();
      this.scanBluetooth();
    },
    watch: {
      settings: {
        handler(newSettings) {
          axios.post('/api/settings', newSettings).catch(err => {
            console.error("Auto-save failed:", err);
          });
        },
        deep: true
      },
      'settings.tournament'(newVal) {
        this.updateLogo();
      }
    }
  }).mount('#app');
</script>
